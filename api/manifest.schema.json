{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://app.lenra.io/manifest.yml",
  "title": "Manifest",
  "description": "The Lenra application manifest",
  "type": "object",
  "properties": {
    "lenra": {
      "description": "The Lenra exposer definition of the application",
      "$ref": "#/definitions/exposer"
    },
    "json": {
      "description": "The JSON exposer definition of the application",
      "$ref": "#/definitions/exposer"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "exposer": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string",
          "description": "The exposer API version"
        },
        "routes": {
          "description": "The routes of the application for this exposer",
          "type": "array",
          "items": {
            "$ref": "#/definitions/route"
          }
        }
      },
      "required": [
        "routes"
      ],
      "additionalProperties": false
    },
    "route": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string"
        },
        "view": {
          "$ref": "#/definitions/components.view"
        },
        "roles": {
          "type": "array",
          "description": "The roles that can access this route",
          "default": [
            "user"
          ],
          "items": {
            "type": "string"
          },
          "nullable": true
        }
      },
      "required": [
        "path",
        "view"
      ],
      "additionalProperties": false
    },
    "components.view": {
      "title": "View",
      "description": "Element of type view",
      "type": "object",
      "properties": {
        "_type": {
          "description": "The identifier of the component",
          "const": "view"
        },
        "name": {
          "description": "The name of the view",
          "type": "string"
        },
        "props": {
          "$ref": "#/definitions/defs.props"
        },
        "find": {
          "$ref": "#/definitions/components.view.definitions.find"
        },
        "context": {
          "description": "The context projection. This field represents the projection of the context, allowing selective retrieval of specific elements. It is a map that specifies the desired elements to be included in the projection.",
          "type": "object"
        }
      },
      "required": [
        "_type",
        "name"
      ],
      "additionalProperties": false,
      "definitions": {}
    },
    "defs.props": {
      "title": "Props",
      "description": "Parameters passed to the listener",
      "type": "object"
    },
    "components.view.definitions.find": {
      "title": "Find",
      "description": "Find query for view components",
      "type": "object",
      "properties": {
        "coll": {
          "description": "the collection where the query is applied",
          "type": "string"
        },
        "query": {
          "$ref": "#/definitions/data.query"
        },
        "projection": {
          "$ref": "#/definitions/data.projection"
        }
      },
      "required": [
        "coll",
        "query"
      ],
      "additionalProperties": false
    },
    "data.query": {
      "title": "Query",
      "description": "Mongo data query",
      "type": "object",
      "additionalProperties": true
    },
    "data.projection": {
      "title": "Projection",
      "description": "Mongo data query projection",
      "type": "object",
      "additionalProperties": {}
    }
  }
}