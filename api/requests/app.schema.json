{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://app.lenra.io/requests/app.yml",
  "title": "AppRequest",
  "description": "The Lenra application request",
  "oneOf": [
    {
      "$ref": "#/definitions/view"
    },
    {
      "$ref": "#/definitions/listener"
    },
    {
      "$ref": "#/definitions/resource"
    }
  ],
  "definitions": {
    "view": {
      "title": "ViewRequest",
      "description": "The Lenra application view request",
      "type": "object",
      "properties": {
        "view": {
          "type": "string",
          "description": "The requested view name"
        },
        "data": {
          "description": "The JSON exposer definition of the application",
          "$ref": "#/definitions/data.result.find"
        },
        "props": {
          "$ref": "#/definitions/defs.props"
        },
        "context": {
          "description": "The context of current the view rendering",
          "type": "object",
          "additionalProperties": {},
          "nullable": true
        }
      },
      "additionalProperties": false,
      "required": [
        "view"
      ]
    },
    "listener": {
      "title": "ListenerRequest",
      "description": "The Lenra application view request",
      "type": "object",
      "properties": {
        "listener": {
          "type": "string",
          "description": "The requested listener name"
        },
        "props": {
          "$ref": "#/definitions/defs.props"
        },
        "event": {
          "description": "The event that triggered the listener",
          "type": "object",
          "additionalProperties": {},
          "nullable": true
        },
        "api": {
          "$ref": "#/definitions/listener.definitions.api"
        }
      },
      "additionalProperties": false,
      "required": [
        "listener",
        "api"
      ],
      "definitions": {}
    },
    "resource": {
      "title": "ResourceRequest",
      "description": "The Lenra application resource request",
      "type": "object",
      "properties": {
        "resource": {
          "type": "string",
          "description": "The requested resource identifier (could be a name, a path or whatever you want to use as identifier)"
        }
      },
      "additionalProperties": false,
      "required": [
        "resource"
      ]
    },
    "defs.props": {
      "title": "Props",
      "description": "Parameters passed to the listener",
      "type": "object"
    },
    "listener.definitions.api": {
      "title": "ApiInformations",
      "description": "The internal API informations",
      "type": "object",
      "properties": {
        "url": {
          "description": "The URL of the internal API",
          "type": "string"
        },
        "token": {
          "description": "The token to use to authenticate the request",
          "type": "string"
        }
      },
      "required": [
        "url",
        "token"
      ],
      "additionalProperties": false
    },
    "data.result.find": {
      "title": "FindResult",
      "description": "Find query result.",
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": {}
      }
    }
  }
}